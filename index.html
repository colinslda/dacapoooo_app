<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <!--
      The viewport meta tag ensures the application takes up the full screen
      on mobile devices and respects the notch and status bar areas on
      devices like the iPhone 14 Pro. The `viewport-fit=cover` value
      instructs Safari to allow the web content to extend into the safe
      areas, which is appropriate for a fullscreen PWA.
    -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="style.css" />
    <title>DaCapo.</title>
  </head>
  <body>
    <!--
      The header contains the application title. A minimalist
      typographic treatment evokes the understated elegance of iOS
      applications. The header remains static while pages change below.
    -->
    <header>
      <h1>DaCapo.</h1>
    </header>
    <!--
      The main area holds the different application pages. Only one
      section is visible at a time; others are hidden via the `active`
      class controlled in JavaScript. Each page is self‑contained and
      implements a discrete feature: Répertoire, Métronome & Accordeur,
      Agenda, and Matériel.
    -->
    <main id="app">
      <!-- Répertoire page -->
      <section id="repertoire" class="page active">
        <h2>Répertoire</h2>
        <!-- Form to add a new piece. Required inputs ensure entries are
             not left blank. After submission the form resets via JS. -->
        <form id="repertoire-form" class="form-row">
          <input
            type="text"
            id="rep-title"
            placeholder="Titre de la pièce"
            required
          />
          <input
            type="text"
            id="rep-composer"
            placeholder="Compositeur"
            required
          />
          <button type="submit">Ajouter</button>
        </form>
        <ul id="repertoire-list" class="item-list"></ul>
      </section>

      <!-- Métronome & Accordeur page -->
      <section id="metronome" class="page">
        <h2>Métronome &amp; Accordeur</h2>
        <div class="metronome-container">
          <label for="bpm">Tempo&nbsp;(BPM)</label>
          <input
            type="range"
            id="bpm"
            min="30"
            max="240"
            value="120"
          />
          <span id="bpm-display">120</span>
          <button id="metronome-toggle" class="primary">Démarrer</button>
          <div id="metronome-visual" class="metronome-visual"></div>
        </div>
        <div class="tuner-container">
          <button id="tuner-toggle" class="secondary">Accordeur&nbsp;A=442&nbsp;Hz</button>
        </div>
      </section>

      <!-- Agenda page -->
      <section id="agenda" class="page">
        <h2>Agenda</h2>
        <form id="agenda-form" class="form-row">
          <input
            type="text"
            id="agenda-title"
            placeholder="Titre de l'événement"
            required
          />
          <input type="date" id="agenda-date" required />
          <input type="time" id="agenda-time" />
          <button type="submit">Ajouter</button>
        </form>
        <ul id="agenda-list" class="item-list"></ul>
      </section>

      <!-- Matériel & Accessoires page -->
      <section id="materials" class="page">
        <h2>Matériel&nbsp;&amp;&nbsp;Accessoires</h2>
        <form id="materials-form" class="form-row">
          <input
            type="text"
            id="material-name"
            placeholder="Nom de l'article"
            required
          />
          <button type="submit">Ajouter</button>
        </form>
        <ul id="materials-list" class="item-list"></ul>
      </section>
    </main>
    <!--
      The bottom navigation bar mimics the native iOS tab bar. Each
      button has a data‑target attribute linking it to a corresponding
      page id. The active class is applied programmatically to
      highlight the current tab.
    -->
    <nav>
      <button data-target="repertoire" class="active">Répertoire</button>
      <button data-target="metronome">Métronome</button>
      <button data-target="agenda">Agenda</button>
      <button data-target="materials">Matériel</button>
    </nav>
    <script src="script.js"></script>
    <script>
      // Register the service worker to enable offline usage and
      // install the PWA when added to the home screen. Registration is
      // deferred until after the window's load event to avoid
      // interfering with first paint. If service workers are not
      // supported, registration silently fails.
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("service-worker.js")
            .catch((err) => console.error("SW registration failed:", err));
        });
      }
    </script>
  </body>
</html>